# ðŸš€ COMPLETE GODADDY DEPLOYMENT GUIDE FOR PAWNFLOW

## ðŸ“‹ DEPLOYMENT CHECKLIST

### PHASE 1: PREREQUISITES & SETUP

#### 1. **GoDaddy Account Requirements**
- [ ] GoDaddy hosting account (Business plan or higher recommended)
- [ ] cPanel access
- [ ] SSH access enabled
- [ ] Node.js support on server (GoDaddy Premium/Deluxe plans)

#### 2. **Domain & SSL**
- [ ] Domain registered or transferred to GoDaddy
- [ ] SSL certificate installed (auto-provisioned with Let's Encrypt)
- [ ] DNS records configured
- [ ] Domain pointing to GoDaddy servers

#### 3. **Database Setup**
- [ ] PostgreSQL database created on GoDaddy
  - Database name: `pawn_shop`
  - Username: Create secure user
  - Password: Generate strong password
  - Host: GoDaddy database server (e.g., `mysql.godaddy.com`)
- [ ] Database backup of current local PostgreSQL (`pawn_shop_dump.sql`)
- [ ] Database schema migration ready
- [ ] Test user record created

#### 4. **Environment Variables**
Create `.env` file with:
```
# Server
NODE_ENV=production
PORT=5000
SERVER_URL=https://yourdomain.com

# Database (GoDaddy PostgreSQL)
DATABASE_URL=postgresql://username:password@godaddy-db-host:5432/pawn_shop

# JWT Authentication
JWT_SECRET=your-strong-secret-key-minimum-32-characters

# Session
SESSION_SECRET=your-strong-session-key-minimum-32-characters

# Email (optional - for future notifications)
SMTP_HOST=smtp.godaddy.com
SMTP_PORT=465
SMTP_USER=your-email@yourdomain.com
SMTP_PASSWORD=your-email-password

# API Keys
API_KEY=your-secure-api-key

# Logging
LOG_LEVEL=info
```

---

### PHASE 2: BACKEND DEPLOYMENT (Node.js/Express)

#### 5. **Files to Upload to GoDaddy**

**Required Backend Files:**
```
/public/
  â””â”€â”€ pdf-invoices/ (auto-created)

/migrations/
  â””â”€â”€ *.sql (database migrations)

/node_modules/ (generated by npm install)

Root Files:
  - server.js
  - pdf-invoice-generator.js
  - validators.js
  - package.json
  - package-lock.json
  - .env (with production credentials)
  - .gitignore
  - README.md
```

**Files NOT to Upload:**
```
- .git/ (git history)
- /tests/ (test files)
- /pdfs/ (local PDFs)
- *.log files
- .env.example
- test-*.js files
- server.err, server_err.log, server_out.log
```

#### 6. **SSH/FTP Connection to GoDaddy**

**Via SSH (Recommended):**
```bash
ssh username@your-domain.com
# Enter password when prompted
```

**Via FTP:**
- Host: ftp.your-domain.com
- Username: Your GoDaddy username
- Password: Your GoDaddy password
- Port: 21

#### 7. **Install Dependencies on Server**

```bash
# SSH into GoDaddy server
ssh user@yourdomain.com

# Navigate to app directory
cd ~/public_html/pawnflow

# Install Node.js dependencies
npm install --production

# Verify installation
npm list --production
```

#### 8. **Database Migration**

```bash
# Connect to GoDaddy PostgreSQL from local machine
psql -h godaddy-db-host -U username -d pawn_shop

# Then run migration SQL:
\i pawn_shop_schema.sql
\i seed-test-data.sql

# Or from server:
psql -U username -d pawn_shop < pawn_shop_schema.sql
psql -U username -d pawn_shop < seed-test-data.sql

# Verify tables
\dt

# Exit
\q
```

#### 9. **Start Node.js Application**

**Option A: Using PM2 (Recommended - Persistent)**
```bash
# Install PM2 globally on server
npm install -g pm2

# Start application
pm2 start server.js --name "pawnflow-api" --instances max

# Set to start on reboot
pm2 startup
pm2 save

# Monitor
pm2 status
pm2 logs
```

**Option B: Using nohup (Simpler)**
```bash
nohup node server.js > server.log 2>&1 &
```

**Option C: Using Apache/Nginx (Proxy)**
GoDaddy may require running through their web server as proxy.

#### 10. **Configure Web Server (If Required)**

If GoDaddy requires Apache/Nginx proxy:

**Apache (.htaccess):**
```apache
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ http://localhost:5000/$1 [P,L]
</IfModule>
```

**Nginx:**
```nginx
server {
    listen 80;
    server_name yourdomain.com;

    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

---

### PHASE 3: FRONTEND DEPLOYMENT (React)

#### 11. **Frontend Build & Files**

```bash
# Build production React app (from local machine)
cd c:\Users\HP\pawn-flow-frontend
npm run build

# Output created in: build/

# Files to upload to GoDaddy:
# - build/ (entire folder with HTML, CSS, JS)
# - public/ (if exists)
# - package.json
```

#### 12. **Upload Frontend to GoDaddy**

**Via FTP/SSH:**
```bash
# Upload build folder to public_html
scp -r build/* user@yourdomain.com:~/public_html/

# Or via FTP:
# Drag build/ contents to public_html/
```

#### 13. **Configure Frontend API URL**

**Update API endpoints in frontend code:**

File: `src/config/api.js` or similar
```javascript
const API_BASE_URL = process.env.REACT_APP_API_URL || 
  (window.location.hostname === 'localhost' 
    ? 'http://localhost:5000' 
    : 'https://yourdomain.com/api');
```

**Environment file (.env.production):**
```
REACT_APP_API_URL=https://yourdomain.com/api
REACT_APP_ENV=production
```

#### 14. **Configure CORS (Backend)**

Update `server.js` CORS settings:
```javascript
const cors = require('cors');

app.use(cors({
  origin: [
    'https://yourdomain.com',
    'https://www.yourdomain.com',
    'http://yourdomain.com'
  ],
  credentials: true,
  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],
  allowedHeaders: ['Content-Type', 'Authorization']
}));
```

---

### PHASE 4: SSL & SECURITY

#### 15. **SSL Certificate**
- [ ] Enable HTTPS (GoDaddy provides free SSL)
- [ ] Verify certificate is active
- [ ] Redirect HTTP â†’ HTTPS
- [ ] Test with https://www.sslshopper.com

#### 16. **Security Hardening**

**Add to server.js:**
```javascript
const helmet = require('helmet');
app.use(helmet()); // Install: npm install helmet
```

**Update .env:**
```
JWT_EXPIRY=3600 (1 hour)
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_TIME=900 (15 minutes)
```

#### 17. **Firewall Rules (GoDaddy cPanel)**
- [ ] Allow only necessary ports (80, 443, 3306/5432 for DB)
- [ ] Block unauthorized access
- [ ] Configure rate limiting

---

### PHASE 5: DATABASE BACKUP & MONITORING

#### 18. **Automated Backups**

**GoDaddy cPanel:**
- [ ] Enable automatic daily backups
- [ ] Set backup frequency (daily)
- [ ] Store backups securely
- [ ] Test restore process

**Manual Backup Command:**
```bash
# From GoDaddy server
pg_dump -U username -d pawn_shop > backup_$(date +%Y%m%d).sql

# From local machine
pg_dump -h godaddy-db-host -U username -d pawn_shop > backup.sql
```

#### 19. **Monitoring & Logging**

**Server Health Check:**
```bash
# SSH into server
curl https://yourdomain.com/api/health

# Check Node process
pm2 status

# View logs
pm2 logs pawnflow-api

# Or check system
ps aux | grep node
```

**Create monitoring script:**
```bash
#!/bin/bash
# check-server-health.sh
curl -I https://yourdomain.com/api/health || \
  echo "Server down - restart PM2" && \
  pm2 restart pawnflow-api
```

---

### PHASE 6: PERFORMANCE OPTIMIZATION

#### 20. **Caching & CDN**
- [ ] Enable GoDaddy CDN for static assets (frontend)
- [ ] Add caching headers to responses
- [ ] Enable gzip compression

**Add to server.js:**
```javascript
const compression = require('compression');
app.use(compression()); // Install: npm install compression
```

#### 21. **Database Optimization**
- [ ] Create indexes on frequently queried columns
- [ ] Monitor query performance
- [ ] Set up slow query logs

**SQL Indexes:**
```sql
CREATE INDEX idx_loans_status ON loans(status);
CREATE INDEX idx_loans_customer_id ON loans(customer_id);
CREATE INDEX idx_loans_transaction_number ON loans(transaction_number);
```

#### 22. **API Rate Limiting**
```javascript
const rateLimit = require('express-rate-limit');

const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 minutes
  max: 100 // limit each IP to 100 requests per windowMs
});

app.use('/api/', limiter);
```

---

### PHASE 7: POST-DEPLOYMENT TESTING

#### 23. **Functional Testing**
- [ ] Test user login
- [ ] Create new loan
- [ ] View PDF invoice
- [ ] Search loans
- [ ] Update loan status
- [ ] Process payments
- [ ] Generate reports

#### 24. **Performance Testing**
- [ ] Page load time < 3 seconds
- [ ] API response time < 500ms
- [ ] Database queries optimized
- [ ] No memory leaks

**Test Tools:**
- GTmetrix: https://gtmetrix.com
- Lighthouse: https://developers.google.com/web/tools/lighthouse
- Postman: https://www.postman.com

#### 25. **Security Testing**
- [ ] Test SSL/TLS certificate
- [ ] Check for SQL injection vulnerabilities
- [ ] Validate authentication/authorization
- [ ] Test CORS policies
- [ ] Check sensitive data exposure

**Security Tools:**
- OWASP ZAP
- Burp Suite Community
- Synk.io

---

### PHASE 8: DOMAIN & EMAIL SETUP

#### 26. **Email Configuration**

**GoDaddy Email Hosting:**
- [ ] Set up email accounts (admin@yourdomain.com, etc.)
- [ ] Configure DNS MX records
- [ ] Test email delivery
- [ ] Set up SMTP for application notifications

**SMTP Configuration:**
```
Host: smtp.godaddy.com
Port: 465 (SSL) or 587 (TLS)
Username: your-email@yourdomain.com
Password: Your email password
```

#### 27. **DNS Configuration**

**Required DNS Records:**
```
@ (root)     A          Your GoDaddy IP
www          CNAME      yourdomain.com
mail         A          GoDaddy mail server IP
             MX         mail.yourdomain.com (Priority 10)

Optional:
_dmarc       TXT        v=DMARC1; p=quarantine
_domainkey   TXT        v=DKIM1; ...
```

---

### PHASE 9: TROUBLESHOOTING & SUPPORT

#### 28. **Common GoDaddy Issues & Solutions**

**Issue: Node.js not starting**
```bash
# Check port availability
lsof -i :5000

# Check Node version
node --version

# Check npm modules
npm list

# Reinstall dependencies
rm -rf node_modules package-lock.json
npm install --production
```

**Issue: Database connection failed**
```bash
# Test connection
psql -h godaddy-db-host -U username -d pawn_shop

# Check connection string
echo $DATABASE_URL

# Verify credentials in .env
cat .env | grep DATABASE
```

**Issue: CORS errors**
- [ ] Check frontend URL in CORS whitelist
- [ ] Verify API endpoint URL
- [ ] Check browser console for exact error
- [ ] Test with curl or Postman

**Issue: SSL certificate not working**
- [ ] Force HTTPS redirect
- [ ] Clear browser cache
- [ ] Test with SSL Labs: https://www.ssllabs.com/ssltest

#### 29. **GoDaddy Support Resources**

- GoDaddy Hosting Help: https://www.godaddy.com/help
- cPanel Documentation: https://documentation.cpanel.net
- PostgreSQL Support: https://www.postgresql.org/support

---

### PHASE 10: DEPLOYMENT SCRIPT (AUTOMATED)

#### 30. **Create Deployment Script**

Create `deploy-to-godaddy.sh`:
```bash
#!/bin/bash

# Configuration
GODADDY_HOST="your-domain.com"
GODADDY_USER="your-cpanel-username"
GODADDY_PATH="~/public_html/pawnflow"
GITHUB_REPO="your-github-repo-url"

echo "ðŸš€ Starting deployment to GoDaddy..."

# 1. Build frontend
echo "ðŸ“¦ Building frontend..."
cd frontend
npm run build
cd ..

# 2. Upload files via SCP
echo "ðŸ“¤ Uploading files..."
scp -r build/* $GODADDY_USER@$GODADDY_HOST:$GODADDY_PATH/public

# 3. Connect and update backend
echo "ðŸ”„ Updating backend..."
ssh $GODADDY_USER@$GODADDY_HOST << 'EOF'
  cd $GODADDY_PATH
  git pull origin main
  npm install --production
  pm2 restart pawnflow-api
EOF

# 4. Verify deployment
echo "âœ… Verifying deployment..."
curl https://$GODADDY_HOST/api/health

echo "ðŸŽ‰ Deployment complete!"
```

**Run deployment:**
```bash
chmod +x deploy-to-godaddy.sh
./deploy-to-godaddy.sh
```

---

## ðŸ“Š DEPLOYMENT SUMMARY CHECKLIST

```
PRE-DEPLOYMENT:
â˜ Database backed up locally
â˜ .env file created with production values
â˜ Frontend built (npm run build)
â˜ All tests passing locally
â˜ API tested with Postman

SERVER SETUP:
â˜ GoDaddy cPanel access confirmed
â˜ SSH access enabled
â˜ PostgreSQL database created
â˜ Node.js version compatible
â˜ PM2 installed

FILE UPLOADS:
â˜ Backend code uploaded
â˜ Frontend build uploaded
â˜ package.json & package-lock.json uploaded
â˜ .env file uploaded (securely)
â˜ Database dumps uploaded

CONFIGURATION:
â˜ Environment variables set
â˜ Database connection tested
â˜ CORS configured
â˜ SSL certificate installed
â˜ Domain DNS updated

DEPLOYMENT:
â˜ npm install --production completed
â˜ Database migrations run
â˜ PM2 started successfully
â˜ API endpoints responding
â˜ Frontend loading correctly

POST-DEPLOYMENT:
â˜ Full system tested
â˜ PDF generation working
â˜ Login functionality working
â˜ Loan creation working
â˜ Reports generating
â˜ Backups automated
```

---

## ðŸŽ¯ ESTIMATED TIMELINE

- **Preparation**: 1-2 hours
- **Database setup**: 30 minutes
- **Backend deployment**: 30 minutes
- **Frontend deployment**: 20 minutes
- **Testing & fixes**: 1-2 hours
- **Total**: 3-5 hours

---

## ðŸ’¡ ADDITIONAL RESOURCES

- GoDaddy Help: https://www.godaddy.com/help
- Node.js on GoDaddy: https://www.godaddy.com/help/node-js-21675
- PostgreSQL on GoDaddy: https://www.godaddy.com/help/databases-21677
- PM2 Documentation: https://pm2.keymetrics.io
- Express.js Security: https://expressjs.com/en/advanced/best-practice-security.html

---

## ðŸ“ž NEED HELP?

1. Check GoDaddy support docs
2. Contact GoDaddy support (24/7)
3. Review server logs: `pm2 logs`
4. Test API with Postman
5. Check database connection

Good luck with your deployment! ðŸš€
